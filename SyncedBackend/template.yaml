AWSTemplateFormatVersion: '2010-09-09'
Description: Main Stack for SyncedBackend

Resources:
  CollaborativePlaylistsStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: 'services/collaborative-playlists-service/template.yaml'
      Parameters:
        CollaborativePlaylistTableName: !GetAtt DatabaseStack.Outputs.CollaborativePlaylistTableName
        RestApiId: !GetAtt ApiGateway.Outputs.ApiGatewayRestApiId

  DatabaseStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: 'shared/database.yaml'

  ApiGateway:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: 'shared/api.yaml'
      Parameters:
        GetAllCollaborativePlaylistsResourceId: !GetAtt CollaborativePlaylistsStack.Outputs.GetAllCollaborativePlaylistsResourceId